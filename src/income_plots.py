
run MigrationData.py

# 2011 data #

data_2011 = MigrationData(2011)
data_2011.load_dframe()

age_data_2011 = data_2011.get_key_data('AGE', 'state', False)        
age_group_data_2011 = data_2011.get_age_group_data(True)
sex_data_2011 = data_2011.get_key_data('SEX', 'state', False)
sex_group_data_2011 = data_2011.get_sex_group_data(True)  
income_data_2011 = data_2011.get_income_group_data(False)
income_group_data_2011 = data_2011.get_income_group_data(True)
poverty_group_data_2011 = data_2011.get_poverty_group_data(True)
housing_group_data_2011 = data_2011.get_housing_group_data(True)
race_group_data_2011 = data_2011.get_race_group_data(True)
ea_data_2011 = data_2011.get_key_data('EDUCATIONAL ATTAINMENT','state', False)
ea_group_data_2011 = data_2011.get_education_group_data(True)

# 2012 data #

data_2012 = MigrationData(2012)
data_2012.load_dframe()

age_data_2012 = data_2012.get_key_data('AGE', 'state', False)        
age_group_data_2012 = data_2012.get_age_group_data(True)
sex_data_2012 = data_2012.get_key_data('SEX', 'state', False)
sex_group_data_2012 = data_2012.get_sex_group_data(True)  
income_data_2012 = data_2012.get_income_group_data(False)
income_group_data_2012 = data_2012.get_income_group_data(True)
poverty_group_data_2012 = data_2012.get_poverty_group_data(True)
housing_group_data_2012 = data_2012.get_housing_group_data(True)
race_group_data_2012 = data_2012.get_race_group_data(True)
ea_data_2012 = data_2012.get_key_data('EDUCATIONAL ATTAINMENT','state', False)
ea_group_data_2012 = data_2012.get_education_group_data(True)


# 2013 data #

data_2013 = MigrationData(2013)
data_2013.load_dframe()

age_data_2013 = data_2013.get_key_data('AGE', 'state', False)        
age_group_data_2013 = data_2013.get_age_group_data(True)
sex_data_2013 = data_2013.get_key_data('SEX', 'state', False)
sex_group_data_2013 = data_2013.get_sex_group_data(True)  
income_data_2013 = data_2013.get_income_group_data(False)
income_group_data_2013 = data_2013.get_income_group_data(True)
poverty_group_data_2013 = data_2013.get_poverty_group_data(True)
housing_group_data_2013 = data_2013.get_housing_group_data(True)
race_group_data_2013 = data_2013.get_race_group_data(True)
ea_data_2013 = data_2013.get_key_data('EDUCATIONAL ATTAINMENT','state', False)
ea_group_data_2013 = data_2013.get_education_group_data(True)

# 2014 data #

data_2014 = MigrationData(2014)
data_2014.load_dframe()

age_data_2014 = data_2014.get_key_data('AGE', 'state', False)        
age_group_data_2014 = data_2014.get_age_group_data(True)
sex_data_2014 = data_2014.get_key_data('SEX', 'state', False)
sex_group_data_2014 = data_2014.get_sex_group_data(True)  
income_data_2014 = data_2014.get_income_group_data(False)
income_group_data_2014 = data_2014.get_income_group_data(True)
poverty_group_data_2014 = data_2014.get_poverty_group_data(True)
housing_group_data_2014 = data_2014.get_housing_group_data(True)
race_group_data_2014 = data_2014.get_race_group_data(True)
ea_data_2014 = data_2014.get_key_data('EDUCATIONAL ATTAINMENT','state', False)
ea_group_data_2014 = data_2014.get_education_group_data(True)

# 2015 data #

data_2015 = MigrationData(2015)
data_2015.load_dframe()

age_data_2015 = data_2015.get_key_data('AGE', 'state', False)        
age_group_data_2015 = data_2015.get_age_group_data(True)
sex_data_2015 = data_2015.get_key_data('SEX', 'state', False)
sex_group_data_2015 = data_2015.get_sex_group_data(True)  
income_data_2015 = data_2015.get_income_group_data(False)
income_group_data_2015 = data_2015.get_income_group_data(True)
poverty_group_data_2015 = data_2015.get_poverty_group_data(True)
housing_group_data_2015 = data_2015.get_housing_group_data(True)
race_group_data_2015 = data_2015.get_race_group_data(True)
ea_data_2015 = data_2015.get_key_data('EDUCATIONAL ATTAINMENT','state', False)
ea_group_data_2015 = data_2015.get_education_group_data(True)

# 2016 data #

data_2016 = MigrationData(2016)
data_2016.load_dframe()

age_data_2016 = data_2016.get_key_data('AGE', 'state', False)        
age_group_data_2016 = data_2016.get_age_group_data(True)
sex_data_2016 = data_2016.get_key_data('SEX', 'state', False)
sex_group_data_2016 = data_2016.get_sex_group_data(True)  
income_data_2016 = data_2016.get_income_group_data(False)
income_group_data_2016 = data_2016.get_income_group_data(True)
poverty_group_data_2016 = data_2016.get_poverty_group_data(True)
housing_group_data_2016 = data_2016.get_housing_group_data(True)
race_group_data_2016 = data_2016.get_race_group_data(True)
ea_data_2016 = data_2016.get_key_data('EDUCATIONAL ATTAINMENT','state', False)
ea_group_data_2016 = data_2016.get_education_group_data(True)

# 2017 data #

data_2017 = MigrationData(2017)
data_2017.load_dframe()

age_data_2017 = data_2017.get_key_data('AGE', 'state', False)        
age_group_data_2017 = data_2017.get_age_group_data(True)
sex_data_2017 = data_2017.get_key_data('SEX', 'state', False)
sex_group_data_2017 = data_2017.get_sex_group_data(True)  
income_data_2017 = data_2017.get_income_group_data(False)
income_group_data_2017 = data_2017.get_income_group_data(True)
poverty_group_data_2017 = data_2017.get_poverty_group_data(True)
housing_group_data_2017 = data_2017.get_housing_group_data(True)
race_group_data_2017 = data_2017.get_race_group_data(True)
ea_data_2017 = data_2017.get_key_data('EDUCATIONAL ATTAINMENT','state', False)
ea_group_data_2017 = data_2017.get_education_group_data(True)

# 2018 data #

data_2018 = MigrationData(2018)
data_2018.load_dframe()

age_data_2018 = data_2018.get_key_data('AGE', 'state', False)        
age_group_data_2018 = data_2018.get_age_group_data(True)
sex_data_2018 = data_2018.get_key_data('SEX', 'state', False)
sex_group_data_2018 = data_2018.get_sex_group_data(True)  
income_data_2018 = data_2018.get_income_group_data(False)
income_group_data_2018 = data_2018.get_income_group_data(True)
poverty_group_data_2018 = data_2018.get_poverty_group_data(True)
housing_group_data_2018 = data_2018.get_housing_group_data(True)
race_group_data_2018 = data_2018.get_race_group_data(True)
ea_data_2018 = data_2018.get_key_data('EDUCATIONAL ATTAINMENT','state', False)
ea_group_data_2018 = data_2018.get_education_group_data(True)

# 2019 data #

data_2019 = MigrationData(2019)
data_2019.load_dframe()

age_data_2019 = data_2019.get_key_data('AGE', 'state', False)        
age_group_data_2019 = data_2019.get_age_group_data(True)
sex_data_2019 = data_2019.get_key_data('SEX', 'state', False)
sex_group_data_2019 = data_2019.get_sex_group_data(True)  
income_data_2019 = data_2019.get_income_group_data(False)
income_group_data_2019 = data_2019.get_income_group_data(True)
poverty_group_data_2019 = data_2019.get_poverty_group_data(True)
housing_group_data_2019 = data_2019.get_housing_group_data(True)
race_group_data_2019 = data_2019.get_race_group_data(True)
ea_data_2019 = data_2019.get_key_data('EDUCATIONAL ATTAINMENT','state', False)
ea_group_data_2019 = data_2019.get_education_group_data(True)

import matplotlib.pyplot as plt

x_pos=['0 to 35k','35k to 50k','50k to 75k', '75k+']
plt.plot(income_group_data.loc['New York'],label='2010')
plt.plot(income_group_data_2019.loc['New York'],label='2019')
ax=plt.axes()
ax.set_xticklabels(x_pos)
plt.legend()
plt.title('Income mobility of New York')
plt.ylabel('% of total population of state')
plt.xlabel('income of each household in dollars')

x_pos=['0 to 35k','35k to 50k','50k to 75k', '75k+']
plt.plot(income_group_data.loc['Nevada'],'b',label='2010')
plt.plot(income_group_data_2019.loc['Nevada'],'r',label='2019')
ax=plt.axes()
ax.set_xticklabels(x_pos)
plt.legend()
plt.title('income mobility of Nevada')
plt.ylabel('% of total population of state')
plt.xlabel('income of each household in dollars')

income_0to35_2010=(sum(income_data['loss or $1 to $34,999'])/sum(income_data.sum()))*100

income_35to50_2010=(sum(income_data['$35,000 to $49,999'])/sum(income_data.sum()))*100

income_50to75_2010=(sum(income_data['$50,000 to $74,999'])/sum(income_data.sum()))*100

income_75_2010=(sum(income_data['$75,000 and over'])/sum(income_data.sum()))*100

income_0to35_2011=(sum(income_data_2011['loss or $1 to $34,999'])/sum(income_data_2011.sum()))*100

income_35to50_2011=(sum(income_data_2011['$35,000 to $49,999'])/sum(income_data_2011.sum()))*100

income_50to75_2011=(sum(income_data_2011['$50,000 to $74,999'])/sum(income_data_2011.sum()))*100

income_75_2011=(sum(income_data_2011['$75,000 and over'])/sum(income_data_2011.sum()))*100

income_0to35_2012=(sum(income_data_2012['loss or $1 to $34,999'])/sum(income_data_2012.sum()))*100

income_35to50_2012=(sum(income_data_2012['$35,000 to $49,999'])/sum(income_data_2012.sum()))*100

income_50to75_2012=(sum(income_data_2012['$50,000 to $74,999'])/sum(income_data_2012.sum()))*100

income_75_2012=(sum(income_data_2012['$75,000 and over'])/sum(income_data_2012.sum()))*100

income_0to35_2013=(sum(income_data_2013['loss or $1 to $34,999'])/sum(income_data_2013.sum()))*100

income_35to50_2013=(sum(income_data_2013['$35,000 to $49,999'])/sum(income_data_2013.sum()))*100

income_50to75_2013=(sum(income_data_2013['$50,000 to $74,999'])/sum(income_data_2013.sum()))*100

income_75_2013=(sum(income_data_2013['$75,000 and over'])/sum(income_data_2013.sum()))*100

income_0to35_2014=(sum(income_data_2014['loss or $1 to $34,999'])/sum(income_data_2014.sum()))*100

income_35to50_2014=(sum(income_data_2014['$35,000 to $49,999'])/sum(income_data_2014.sum()))*100

income_50to75_2014=(sum(income_data_2014['$50,000 to $74,999'])/sum(income_data_2014.sum()))*100

income_75_2014=(sum(income_data_2014['$75,000 and over'])/sum(income_data_2014.sum()))*100

income_0to35_2015=(sum(income_data_2015['loss or $1 to $34,999'])/sum(income_data_2015.sum()))*100

income_35to50_2015=(sum(income_data_2015['$35,000 to $49,999'])/sum(income_data_2015.sum()))*100

income_50to75_2015=(sum(income_data_2015['$50,000 to $74,999'])/sum(income_data_2015.sum()))*100

income_75_2015=(sum(income_data_2015['$75,000 and over'])/sum(income_data_2015.sum()))*100

income_0to35_2016=(sum(income_data_2016['loss or $1 to $34,999'])/sum(income_data_2016.sum()))*100

income_35to50_2016=(sum(income_data_2016['$35,000 to $49,999'])/sum(income_data_2016.sum()))*100

income_50to75_2016=(sum(income_data_2016['$50,000 to $74,999'])/sum(income_data_2016.sum()))*100

income_75_2016=(sum(income_data_2016['$75,000 and over'])/sum(income_data_2016.sum()))*100

income_0to35_2017=(sum(income_data_2017['loss or $1 to $34,999'])/sum(income_data_2017.sum()))*100

income_35to50_2017=(sum(income_data_2017['$35,000 to $49,999'])/sum(income_data_2017.sum()))*100

income_50to75_2017=(sum(income_data_2017['$50,000 to $74,999'])/sum(income_data_2017.sum()))*100

income_75_2017=(sum(income_data_2017['$75,000 and over'])/sum(income_data_2017.sum()))*100

income_0to35_2018=(sum(income_data_2018['loss or $1 to $34,999'])/sum(income_data_2018.sum()))*100

income_35to50_2018=(sum(income_data_2018['$35,000 to $49,999'])/sum(income_data_2018.sum()))*100

income_50to75_2018=(sum(income_data_2018['$50,000 to $74,999'])/sum(income_data_2018.sum()))*100

income_75_2018=(sum(income_data_2018['$75,000 and over'])/sum(income_data_2018.sum()))*100

income_0to35_2019=(sum(income_data_2019['loss or $1 to $34,999'])/sum(income_data_2019.sum()))*100

income_35to50_2019=(sum(income_data_2019['$35,000 to $49,999'])/sum(income_data_2019.sum()))*100

income_50to75_2019=(sum(income_data_2019['$50,000 to $74,999'])/sum(income_data_2019.sum()))*100

income_75_2019=(sum(income_data_2019['$75,000 and over'])/sum(income_data_2019.sum()))*100

x_pos=['0 to 35k','35k to 50k','50k to 75k', '75k+']
y=[income_0to35_2019,income_35to50_2019,income_50to75_2019,income_75_2019]
plt.figure(figsize=(7,7)) 
plt.plot(y,'--ro',label='2019')
plt.xticks([0.0,1.0,2.0,3.0],x_pos)
plt.yticks([i for i in range(0,70,5)])
plt.legend()
plt.title('Trend of people moving according to income')
plt.ylabel('% of people moving according to income')
plt.xlabel('Individual income in dollars')
plt.savefig('income_trend_2019')

import numpy as np

x_pos=['0 to 35k','35k to 50k','50k to 75k', '75k+']
y=[income_0to35_2010,income_35to50_2010,income_50to75_2010,income_75_2010]
z=[income_0to35_2019,income_35to50_2019,income_50to75_2019,income_75_2019]
plt.figure(figsize=(7,7)) 
X_axis = np.arange(len(x_pos))
plt.bar(X_axis-0.2,y,width=0.4,color='mediumseagreen',label='2010')
plt.bar(X_axis+0.2,z,width=0.4,color='dodgerblue',label='2019')
plt.xticks([0.0,1.0,2.0,3.0],x_pos)
plt.yticks([i for i in range(0,80,5)])
plt.legend()
plt.title('Income trend of migrating people',fontsize='19',pad=15)
plt.ylabel('Percentage',fontsize='14')
plt.xlabel('Individual income in dollars',fontsize='14')
plt.savefig('change_in_trend_bar')

x_pos=['2010','2011','2012', '2013','2014','2015','2016','2017','2018','2019']
y=[income_0to35_2010,income_0to35_2011,income_0to35_2012,income_0to35_2013,income_0to35_2014,income_0to35_2015,income_0to35_2016,income_0to35_2017,income_0to35_2018,income_0to35_2019]
plt.figure(figsize=(7,7)) 
plt.plot(y,'--bo',label='')
plt.xticks([0.0,1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0,9.0],x_pos)
plt.yticks([i for i in range(50,77,3)])
plt.title('Trend of people moving earning in the range $0 to 35k')
plt.ylabel('in % of total people moving')
plt.xlabel('Year')
plt.savefig('income_trend_0to35k')

x_pos=['2010','2011','2012', '2013','2014','2015','2016','2017','2018','2019']
y=[income_35to50_2010,income_35to50_2011,income_35to50_2012,income_35to50_2013,income_35to50_2014,income_35to50_2015,income_35to50_2016,income_35to50_2017,income_35to50_2018,income_35to50_2019]
plt.figure(figsize=(7,7)) 
plt.plot(y,'--bo',label='')
plt.xticks([0.0,1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0,9.0],x_pos)
plt.yticks([i for i in range(9,15,1)])
plt.legend()
plt.title('Trend of people moving earning in the range $35 to 50k')
plt.ylabel('in % of total people moving')
plt.xlabel('Year')
plt.savefig('income_trend_35to50')

x_pos=['2010','2011','2012', '2013','2014','2015','2016','2017','2018','2019']
y=[income_50to75_2010,income_50to75_2011,income_50to75_2012,income_50to75_2013,income_50to75_2014,income_50to75_2015,income_50to75_2016,income_50to75_2017,income_50to75_2018,income_50to75_2019]
plt.figure(figsize=(7,7)) 
plt.plot(y,'--bo',label='')
plt.xticks([0.0,1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0,9.0],x_pos)
plt.yticks([i for i in range(7,17,1)])
plt.legend()
plt.title('Trend of people moving earning in the range $50k to 75k')
plt.ylabel('in % of total people moving')
plt.xlabel('Year')
plt.savefig('income_trend_50to75')

x_pos=['2010','2011','2012', '2013','2014','2015','2016','2017','2018','2019']
y=[income_75_2010,income_75_2011,income_75_2012,income_75_2013,income_75_2014,income_75_2015,income_75_2016,income_75_2017,income_75_2018,income_75_2019]
plt.figure(figsize=(7,7)) 
plt.plot(y,'--bo',label='')
plt.xticks([0.0,1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0,9.0],x_pos)
plt.yticks([i for i in range(5,23,2)])
plt.legend()
plt.title('Trend of people moving earning in the range $75k and above')
plt.ylabel('in % of total people moving')
plt.xlabel('Year')
plt.savefig('income_trend_75')

labels=["0 to 35k dollars",'35k to 50k dollars','50k to 75k dollars', '75k+ dollars']
explode=[0.035,0.035,0.035,0.035]
y=[income_0to35_2019,income_35to50_2019,income_50to75_2019,income_75_2019]
plt.figure(figsize=(7,7)) 
textprops = {"fontsize":15}
plt.pie(y,labels=labels,explode=explode,autopct='%1.1f%%',textprops=textprops)
plt.title('Income trend of migrating people for the year 2019',fontsize='18',pad=32)
plt.legend(labels=labels,loc='best')
plt.savefig('pie_chart_trend_2019')

x_pos=['0 to 35k','35k to 50k','50k to 75k', '75k+']
y_2010=[income_0to35_2010,income_35to50_2010,income_50to75_2010,income_75_2010]
y_2013=[income_0to35_2013,income_35to50_2013,income_50to75_2013,income_75_2013]
y_2016=[income_0to35_2016,income_35to50_2016,income_50to75_2016,income_75_2016]
y_2019=[income_0to35_2019,income_35to50_2019,income_50to75_2019,income_75_2019]
plt.figure(figsize=(7,7)) 
X_axis = np.arange(len(x_pos))
plt.bar(X_axis-0.3,y_2010,width=0.2,label='2010')
plt.bar(X_axis-0.1,y_2013,width=0.2,label='2013')
plt.bar(X_axis+0.1,y_2016,width=0.2,label='2016')
plt.bar(X_axis+0.3,y_2019,width=0.2,label='2019')
plt.xticks([0.0,1.0,2.0,3.0],x_pos)
plt.yticks([i for i in range(0,80,5)])
plt.legend()
plt.title('Income trend of migrating people',fontsize='19',pad=15)
plt.ylabel('Percentage',fontsize='14')
plt.xlabel('Individual income in dollars',fontsize='14')
plt.savefig('change_in_trend_bar new')

